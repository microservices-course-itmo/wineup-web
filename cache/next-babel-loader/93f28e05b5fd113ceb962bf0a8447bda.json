{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { atom, selector, selectorFamily, waitForAll } from 'recoil';\nimport { sortAsc, sortDesc } from '../Catalog/utils';\nimport api from '../../api';\nexport var favoritesState = atom({\n  key: 'favorites',\n  \"default\": []\n});\nexport var favoritesSortState = atom({\n  key: 'favoritesSortState',\n  \"default\": 'recommendations'\n});\nexport var addWineQuery = selectorFamily({\n  key: 'addWineQuery',\n  get: function get(id, token) {\n    return /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return api.addWineToFavorites(id, token);\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n  }\n});\nexport var deleteWineQuery = selectorFamily({\n  key: 'deleteWineQuery',\n  get: function get(id, token) {\n    return /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return api.deleteWineFromFavorites(id, token);\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n  }\n});\nexport var deleteQuery = selectorFamily({\n  key: 'deleteQuery',\n  get: function get(token) {\n    return /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return api.deleteAllWinesFromFavorites(token);\n\n            case 2:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n  }\n});\nexport var favoritesQuery = selectorFamily({\n  key: 'favoritesQuery',\n  get: function get(token) {\n    return /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return api.getFavoritesWines(token);\n\n            case 2:\n              response = _context4.sent;\n              return _context4.abrupt(\"return\", response);\n\n            case 4:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n  }\n});\nexport var winesQuery = selectorFamily({\n  key: 'winesQuery',\n  get: function get(userId) {\n    return /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return api.getFavoritesWinesByUserId(userId);\n\n            case 2:\n              response = _context5.sent;\n              return _context5.abrupt(\"return\", response);\n\n            case 4:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n  }\n});\nexport var contentQuery = selectorFamily({\n  key: 'contentQuery',\n  get: function get(token) {\n    return /*#__PURE__*/function () {\n      var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(_ref6) {\n        var get, favoriteIds, wines;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                get = _ref6.get;\n                favoriteIds = get(favoritesQuery(token));\n                wines = get(waitForAll(favoriteIds.map(function (id) {\n                  return winesQuery(id);\n                })));\n                return _context6.abrupt(\"return\", wines);\n\n              case 4:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6);\n      }));\n\n      return function (_x) {\n        return _ref7.apply(this, arguments);\n      };\n    }();\n  }\n});\nexport var sortedWinesState = selector({\n  key: 'filteredTodoListState',\n  get: function get(_ref8) {\n    var _get = _ref8.get;\n\n    var list = _get(favoritesState);\n\n    var sort = _get(favoritesSortState);\n\n    switch (sort) {\n      case 'priceAsc':\n        return sortAsc(list);\n\n      case 'priceDesc':\n        return sortDesc(list);\n\n      default:\n        return list;\n    }\n  }\n});\nexport var sorts = atom({\n  key: 'sorts',\n  \"default\": []\n});","map":null,"metadata":{},"sourceType":"module"}