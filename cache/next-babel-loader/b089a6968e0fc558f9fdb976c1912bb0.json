{"ast":null,"code":"export const colors = {\n  RED: 'Красное',\n  WHITE: 'Белое',\n  ROSE: 'Розовое',\n  ORANGE: 'Оранжевое'\n};\nexport const sugar = {\n  SWEET: 'Сладкое',\n  DRY: 'Сухое',\n  MEDIUM_DRY: 'Полусухое',\n  MEDIUM: 'Полусладкое'\n};\nexport const stores = {\n  'winelab.ru': 'WineLab',\n  'perekrestok.ru': 'Перекрёсток',\n  'https://spb.winestyle.ru': 'WineStyle',\n  'https://www.lenta.com': 'Лента',\n  'amwine.com': 'Ароматный мир',\n  'https://simplewine.ru': 'SimpleWine'\n};\nexport const sortingButtons = [{\n  value: 'recommendations',\n  textLabel: 'Рекомендованные'\n}, {\n  value: 'priceAsc',\n  textLabel: 'Возрастанию цен'\n}, {\n  value: 'priceDesc',\n  textLabel: 'Убыванию цен'\n}, {\n  value: 'popularity',\n  textLabel: 'Популярности'\n}];\nexport const sortDesc = wines => {\n  const newWines = JSON.parse(JSON.stringify(wines));\n  return newWines.sort((wine1, wine2) => {\n    if (wine1.price) {\n      if (wine2.price) {\n        return wine1.price < wine2.price ? 1 : -1;\n      }\n\n      return wine1.price < wine2.actual_price ? 1 : -1;\n    }\n\n    if (wine2.price) {\n      return wine1.actual_price < wine2.price ? 1 : -1;\n    }\n\n    if (wine1.actual_price === wine2.actual_price) {\n      return 0;\n    }\n\n    return wine1.actual_price < wine2.actual_price ? 1 : -1;\n  });\n};\nexport const sortAsc = wines => {\n  const newWines = JSON.parse(JSON.stringify(wines));\n  return newWines.sort((wine1, wine2) => {\n    if (wine1.price) {\n      if (wine2.price) {\n        return wine1.price > wine2.price ? 1 : -1;\n      }\n\n      return wine1.price > wine2.actual_price ? 1 : -1;\n    }\n\n    if (wine2.price) {\n      return wine1.actual_price > wine2.price ? 1 : -1;\n    }\n\n    if (wine1.actual_price === wine2.actual_price) {\n      return 0;\n    }\n\n    return wine1.actual_price > wine2.actual_price ? 1 : -1;\n  });\n};\nexport const countries = regions => {\n  const country = regions.length > 0 ? regions[0].country : '';\n\n  switch (country) {\n    case 'Италия':\n      return {\n        code: 'it',\n        name: 'Италия'\n      };\n\n    case 'Россия':\n      return {\n        code: 'ru',\n        name: 'Россия'\n      };\n\n    case 'Испания':\n      return {\n        code: 'es',\n        name: 'Испания'\n      };\n\n    case 'Португалия':\n      return {\n        code: 'pt',\n        name: 'Португалия'\n      };\n\n    case 'Франция':\n      return {\n        code: 'fr',\n        name: 'Франция'\n      };\n\n    case 'Белорусь':\n      return {\n        code: 'by',\n        name: 'Белорусь'\n      };\n\n    case 'Украина':\n      return {\n        code: 'ua',\n        name: 'Украина'\n      };\n\n    case 'Бельгия':\n      return {\n        code: 'be',\n        name: 'Бельгия'\n      };\n\n    case 'Чехия':\n      return {\n        code: 'cz',\n        name: 'Чехия'\n      };\n\n    case 'Болгария':\n      return {\n        code: 'bg',\n        name: 'Болгария'\n      };\n\n    case 'Греция':\n      return {\n        code: 'gr',\n        name: 'Греция'\n      };\n\n    case 'Венгрия':\n      return {\n        code: 'hu',\n        name: 'Венгрия'\n      };\n\n    case 'Польша':\n      return {\n        code: 'pl',\n        name: 'Польша'\n      };\n\n    case 'США':\n      return {\n        code: 'us',\n        name: 'США'\n      };\n\n    default:\n      return {\n        code: 'fr',\n        name: 'Франция'\n      };\n  }\n};\nexport const calculatePrice = wine => {\n  if (wine.actual_price === 0 && wine.price === 0) {\n    return Math.round(Math.random() * (2500 - 400) + 400);\n  }\n\n  if (wine.actual_price === 0) {\n    return wine.price;\n  }\n\n  if (wine.price === 0) {\n    return wine.actual_price;\n  }\n\n  return wine.actual_price < wine.price ? wine.price : wine.actual_price;\n};\nexport const calculateDiscount = wine => {\n  if (wine.actual_price === 0 || wine.price === 0 || wine.actual_price === wine.price || !Math.round((wine.actual_price - wine.price) / wine.actual_price * 100)) {\n    return null;\n  }\n\n  if (wine.actual_price > wine.price) {\n    return {\n      price: wine.price,\n      percent: Math.round((wine.actual_price - wine.price) / wine.actual_price * 100)\n    };\n  }\n\n  return {\n    price: wine.actual_price,\n    percent: Math.round((wine.price - wine.actual_price) / wine.price * 100)\n  };\n};\nexport const parseImageSrc = src => {\n  if (src.lastIndexOf('https:') !== 0) {\n    return src.slice(src.lastIndexOf('https:'));\n  }\n\n  return src;\n};\nexport const parseAbout = wine => {\n  return `${colors[wine.wine.color]}, ${sugar[wine.wine.sugar]}`;\n};\nexport const parseGrapes = grapes => {\n  if (grapes.length === 0) {\n    return 'Неизвестно';\n  }\n\n  return grapes.reduce((acc, value) => `${acc + value.name}, `, '').slice(0, -2);\n};\nexport const parseProducer = producer => {\n  if (producer === 'PRODUCER_NOT_PRESENTED') {\n    return 'Неизвестно';\n  }\n\n  return producer;\n};\nexport const getWineInfo = wine => {\n  return {\n    shop: stores[wine.shop.site] || 'Ароматный мир',\n    name: wine.wine.name,\n    about: parseAbout(wine),\n    country: countries(wine.wine.region),\n    size: wine.volume,\n    year: wine.wine.year || 2020,\n    fitsPercent: Math.round(Math.random() * (85 - 45) + 45),\n    stars: Math.round(Math.random() * (5 - 2) + 2),\n    price: calculatePrice(wine),\n    discount: calculateDiscount(wine)\n  };\n};\nexport const getWinePositionInfo = wine => {\n  return {\n    shop: stores[wine.shop.site] || 'Ароматный мир',\n    name: wine.wine.name,\n    grape: parseGrapes(wine.wine.grape),\n    size: wine.volume,\n    country: countries(wine.wine.region).name,\n    sugar: sugar[wine.wine.sugar],\n    color: colors[wine.wine.color],\n    alcohol: wine.wine.avg,\n    brand: parseProducer(wine.wine.producer.name),\n    year: wine.wine.year || 2020,\n    fitsPercent: Math.round(Math.random() * (85 - 45) + 45),\n    stars: Math.round(Math.random() * (5 - 2) + 2),\n    price: calculatePrice(wine),\n    discount: calculateDiscount(wine)\n  };\n};","map":null,"metadata":{},"sourceType":"module"}